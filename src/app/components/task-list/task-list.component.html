<h1>–°–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å</h1>

<app-task-form 
  [taskToEdit]="selectedTask" 
  (taskAdded)="addTask($event)" 
  (taskUpdated)="updateTask($event)">
</app-task-form>

<!-- –§—ñ–ª—å—Ç—Ä –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º -->
<div class="filter-section">
  <label for="statusFilter">–§—ñ–ª—å—Ç—Ä –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º:</label>
  <select id="statusFilter" (change)="filterTasks($event)">
    <option value="">–í—Å—ñ</option>
    <option value="–¥–æ —Ä–æ–±–æ—Ç–∏">–î–æ —Ä–æ–±–æ—Ç–∏</option>
    <option value="–≤ –ø—Ä–æ—Ü–µ—Å—ñ">–í –ø—Ä–æ—Ü–µ—Å—ñ</option>
    <option value="–≤–∏–∫–æ–Ω–∞–Ω–æ">–í–∏–∫–æ–Ω–∞–Ω–æ</option>
  </select>
</div>

<!-- –°–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å -->
@for (task of filteredTasks; track task.id) {
  <div class="task-item-container">
    <p class="task-title"><strong>{{ task.title }}</strong></p>
    <p class="task-info"><span>–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:</span> {{ task.dueDate | date:'dd.MM.yyyy' }}</p>
    <p class="task-info"><span>–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å:</span> {{ task.assignee }}</p>
    <p class="task-info"><span>–û–ø–∏—Å:</span> {{ task.description }}</p>
    <p class="task-info">
      <span>–°—Ç–∞—Ç—É—Å:</span>
      <span [ngClass]="{
        'status-todo': task.status === TaskStatus.TODO,
        'status-in-progress': task.status === TaskStatus.IN_PROGRESS,
        'status-done': task.status === TaskStatus.DONE
      }">{{ task.status | taskStatus }}</span>
    </p>
    <div class="status-section">
      <select (change)="changeStatus(task, $event)">
        <option value="–¥–æ —Ä–æ–±–æ—Ç–∏" [selected]="task.status === TaskStatus.TODO">üöÄ –î–æ —Ä–æ–±–æ—Ç–∏</option>
        <option value="–≤ –ø—Ä–æ—Ü–µ—Å—ñ" [selected]="task.status === TaskStatus.IN_PROGRESS">‚åõ –í –ø—Ä–æ—Ü–µ—Å—ñ</option>
        <option value="–≤–∏–∫–æ–Ω–∞–Ω–æ" [selected]="task.status === TaskStatus.DONE">‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ</option>
      </select>
    </div>
    <div class="buttons">
      @if (task.status === TaskStatus.TODO) {
        <button class="action-button take-button" (click)="takeTask(task)">–í–∑—è—Ç–∏</button>
      }
      <button class="action-button delete-button" (click)="deleteTask(task.id)">–í–∏–¥–∞–ª–∏—Ç–∏</button>
      <button class="action-button edit-button" (click)="editTask(task)">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</button>
    </div>
  </div>
}